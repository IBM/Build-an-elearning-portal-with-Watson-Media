{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"/Users/kushagra/IBM/Watson-Media/build-an-elearning-portal-with-watson-media/src/reactui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/kushagra/IBM/Watson-Media/build-an-elearning-portal-with-watson-media/src/reactui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/kushagra/IBM/Watson-Media/build-an-elearning-portal-with-watson-media/src/reactui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/kushagra/IBM/Watson-Media/build-an-elearning-portal-with-watson-media/src/reactui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/kushagra/IBM/Watson-Media/build-an-elearning-portal-with-watson-media/src/reactui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/kushagra/IBM/Watson-Media/build-an-elearning-portal-with-watson-media/src/reactui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{withRouter}from\"react-router-dom\";import{Dropdown,Loading,Tabs,Tab}from'carbon-components-react';import axios from'axios';import{Container,Row}from'react-bootstrap';import{BrowserView,MobileView}from\"react-device-detect\";import back from'./../../assets/background3.jpg';var Dashboard=/*#__PURE__*/function(_React$Component){_inherits(Dashboard,_React$Component);var _super=_createSuper(Dashboard);function Dashboard(){var _this;_classCallCheck(this,Dashboard);_this=_super.call(this);_this.onChange=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(e);_this.setState({loading:true,selected:e.selectedItem.text,selectedItem:e.selectedItem});// await axios.get(`https://api.video.ibm.com/channels/${e.selectedItem.id}/playlists.json`,{headers: this.state.headers})\n// .then(res=>{\n//     console.log(res)\n//     const arr = Object.values(res.data.playlists)\n//         const items = arr.map(item=>{\n//             return({\n//                 id: item.id,\n//                 text: item.title\n//             })\n//         })\n//         console.log(\"playlists\", items)\n//         this.setState({playlists: items})\n// }).catch(err=>{\n//     console.log(\"nopr\" ,err)\n//     console.log(this.state.playlists)\n// })\n_context.next=4;return axios.get(\"http://\".concat(window.location.hostname,\":\").concat(window.location.port,\"/showToken\")).then(function(res){// axios.get(`http://${window.location.hostname}:8080/showToken`).then(res=>{\nconsole.log(res.data);// const access_token = res.data.access_token\n// if(access_token !== \"expired\" && access_token.length === 40){\n//     this.setState({auth:true, loading:false, access_token})\n// console.log('auth')\n// } else {\n//     alert(\"Contact Admin to authorize page\")\n//     this.props.history.push('/admin')\n// }\n}).catch(function(err){alert(\"Contact Admin to authorize page\");console.log(err);_this.props.history.push('/admin');});case 4:_context.next=6;return axios.get(\"https://api.video.ibm.com/channels/\".concat(e.selectedItem.id,\"/videos.json\"),{headers:_this.state.headers}).then(function(res){console.log(res);});case 6:_this.setState({loading:false});case 7:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.showPlaylists=function(){var arr=_this.state.playlists.map(function(item){return/*#__PURE__*/_jsxs(Tab,{label:item.text,children:[/*#__PURE__*/_jsx(BrowserView,{children:/*#__PURE__*/_jsx(\"div\",{className:\"some-content\",children:/*#__PURE__*/_jsx(\"iframe\",{src:\"https://video.ibm.com/combined-embed/playlist/\".concat(item.id),style:{border:\"0\",padding:\"0\",backgroundColor:\"white\"},webkitallowfullscreen:true,allowFullScreen:true,frameBorder:\"no\",width:\"1040\",height:\"405\",referrerPolicy:\"no-referrer-when-downgrade\"})})}),/*#__PURE__*/_jsx(MobileView,{children:/*#__PURE__*/_jsx(\"div\",{className:\"some-content\",style:{paddingTop:\"56.25%\",position:\"relative\",overflow:\"hidden\",display:\"block\",height:\"auto\",width:\"100%\"},children:/*#__PURE__*/_jsx(\"iframe\",{src:\"https://video.ibm.com/combined-embed/playlist/\".concat(item.id),style:{border:\"0\",padding:\"0\",backgroundColor:\"white\",position:\"relative\"},webkitallowfullscreen:true,allowFullScreen:true,frameBorder:\"no\",width:\"100%\",height:\"auto\",referrerPolicy:\"no-referrer-when-downgrade\"})})})]});});return arr;};_this.state={selected:\"Select Channel\",channelList:[],loading:true,code:\"\",playlists:[]};return _this;}_createClass(Dashboard,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;// console.log(access_token)\n// console.log(this.props.location.state.user)\nif(!this.props.location.state){alert(\"Please Login to continue\");this.props.history.push({pathname:'/login',state:{reload:true}});}else{var access_token=this.props.location.state.access_token?this.props.location.state.access_token:\"\";if(Object.keys(access_token).length!==0){// console.log(access_token)\nthis.setState({code:access_token});var headers={'Authorization':'Bearer '+access_token,'Content-Type':'application/x-www-form-urlencoded',\"Access-Control-Allow-Origin\":\"*\"};axios.get('https://api.video.ibm.com/users/self/channels.json',{headers:headers}).then(function(res){// console.log(res)\n_this2.setState({loading:false,channelsData:res.data.channels,headers:headers});var arr=Object.values(res.data.channels);// console.log(arr)\nvar items=arr.map(function(item){return{id:item.id,text:item.title};});_this2.setState({channelList:items});// console.log(items)\n});}else{console.log(\"nope\");}}}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(Container,{fluid:true,style:{display:\"flex\",clear:\"both\",justifyContent:\"center\",minHeight:\"100vh\",overflow:\"scroll\",padding:\"1rem\",backgroundImage:\"url(\".concat(back,\")\"),// backgroundPositionX:\"350px\", \nbackgroundSize:'cover',alignItems:\"center\"},children:/*#__PURE__*/_jsx(Row,{className:\"justify-content-md-center\",children:this.state.loading?/*#__PURE__*/_jsx(Loading,{style:{align:'center'},description:\"Active loading indicator\",withOverlay:false}):/*#__PURE__*/_jsxs(\"div\",{className:\"bx--grid bx--grid--full-width landing-page\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bx--row landing-page__banner\",children:/*#__PURE__*/_jsx(\"h1\",{style:{color:\"white\"},children:/*#__PURE__*/_jsx(\"strong\",{children:\"E-Learning Portal using Watson Media\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"bx--row landing-page__r2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bx--col bx--no-gutter\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bx--grid bx--grid--no-gutter bx--grid--full-width\",style:{},children:/*#__PURE__*/_jsx(\"div\",{className:\"bx--row landing-page__tab-content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bx--col-md-4 bx--col-lg-7\",children:[/*#__PURE__*/_jsx(\"div\",{style:{maxWidth:400},children:/*#__PURE__*/_jsx(Dropdown,{id:\"default\",titleText:\"Channel List\"// helperText=\"This is some helper text\"\n,label:this.state.selected,items:this.state.channelList,itemToString:function itemToString(item){return item?item.text:'';},onChange:this.onChange})}),/*#__PURE__*/_jsx(\"br\",{})]})})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"bx--row landing-page__r3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bx--col-md-4 bx--col-lg-8\",children:this.state.selected===\"Select Channel\"?/*#__PURE__*/_jsx(\"p\",{}):/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"tabs-story-wrapper\",children:/*#__PURE__*/_jsxs(Tabs,{backgroundColor:\"white\",style:{paddingLeft:\"2rem\"},type:\"container\",children:[/*#__PURE__*/_jsx(Tab,{label:\"Videos\",children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"iframe\",{src:\"https://video.ibm.com/combined-embed/\".concat(this.state.selectedItem.id,\"/?social=0&videos=tab\"),style:{border:\"0\",padding:\"0\",backgroundColor:\"white\"},webkitallowfullscreen:true,allowFullScreen:true,frameBorder:\"no\",width:\"1040\",height:\"405\",referrerPolicy:\"no-referrer-when-downgrade\"})})}),this.state.playlists.length===0?/*#__PURE__*/_jsx(\"div\",{}):/*#__PURE__*/_jsx(Tab,{label:\"Playlists\",style:{color:\"white\"},children:/*#__PURE__*/_jsx(Tabs,{backgroundColor:\"white\",style:{paddingLeft:\"1rem\"},type:\"container\",children:this.showPlaylists()})})]})})})})})]})})});}}]);return Dashboard;}(React.Component);export default withRouter(Dashboard);","map":{"version":3,"sources":["/Users/kushagra/IBM/Watson-Media/build-an-elearning-portal-with-watson-media/src/reactui/src/content/Dashboard/Dashboard.js"],"names":["React","withRouter","Dropdown","Loading","Tabs","Tab","axios","Container","Row","BrowserView","MobileView","back","Dashboard","onChange","e","console","log","setState","loading","selected","selectedItem","text","get","window","location","hostname","port","then","res","data","catch","err","alert","props","history","push","id","headers","state","showPlaylists","arr","playlists","map","item","border","padding","backgroundColor","paddingTop","position","overflow","display","height","width","channelList","code","pathname","reload","access_token","Object","keys","length","channelsData","channels","values","items","title","clear","justifyContent","minHeight","backgroundImage","backgroundSize","alignItems","align","color","maxWidth","paddingLeft","Component"],"mappings":"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","sourcesContent":["import React from \"react\"\nimport {\n    withRouter\n  } from \"react-router-dom\"\nimport {Dropdown, Loading, Tabs, Tab} from 'carbon-components-react'\nimport axios from 'axios'\nimport {Container, Row} from 'react-bootstrap'\nimport {\n    BrowserView,\n    MobileView,\n} from \"react-device-detect\";\nimport back from './../../assets/background3.jpg'\n\n\n  class Dashboard extends React.Component{\n    constructor(){\n        super()\n        this.state = {\n            selected: \"Select Channel\",\n            channelList: [],\n            loading: true,\n            code:\"\",\n            playlists:[]\n        }\n    }\n\n    componentDidMount(){\n        // console.log(access_token)\n        // console.log(this.props.location.state.user)\n        if(!this.props.location.state){\n            alert(\"Please Login to continue\")\n            this.props.history.push({\n                pathname:'/login',\n                state:{ reload:true }\n            })\n        } else {\n            const access_token = this.props.location.state.access_token?this.props.location.state.access_token:\"\"\n            if(Object.keys(access_token).length !== 0){\n                // console.log(access_token)\n                this.setState({code: access_token})\n                const headers = {\n                    'Authorization': 'Bearer ' + access_token,\n                    'Content-Type': 'application/x-www-form-urlencoded',\n                    \"Access-Control-Allow-Origin\": \"*\"\n                }\n                axios.get('https://api.video.ibm.com/users/self/channels.json',{headers:headers}).then(res=>{\n                    // console.log(res)\n                    this.setState({loading:false, channelsData: res.data.channels, headers})\n                    const arr = Object.values(res.data.channels)\n                    // console.log(arr)\n                    const items = arr.map(item=>{\n                        return({\n                            id: item.id,\n                            text: item.title\n                        })\n                    })\n                    this.setState({channelList: items})\n                    // console.log(items)\n                })\n            } else {\n                console.log(\"nope\")\n            }\n        }\n    }\n\n    onChange = async (e)=>{\n        console.log(e)\n        this.setState({loading: true, selected: e.selectedItem.text, selectedItem: e.selectedItem})\n        // await axios.get(`https://api.video.ibm.com/channels/${e.selectedItem.id}/playlists.json`,{headers: this.state.headers})\n        // .then(res=>{\n        //     console.log(res)\n        //     const arr = Object.values(res.data.playlists)\n        //         const items = arr.map(item=>{\n        //             return({\n        //                 id: item.id,\n        //                 text: item.title\n        //             })\n        //         })\n        //         console.log(\"playlists\", items)\n        //         this.setState({playlists: items})\n        // }).catch(err=>{\n        //     console.log(\"nopr\" ,err)\n        //     console.log(this.state.playlists)\n        // })\n\n        await axios.get(`http://${window.location.hostname}:${window.location.port}/showToken`).then(res=>{\n            // axios.get(`http://${window.location.hostname}:8080/showToken`).then(res=>{\n                console.log(res.data)\n                // const access_token = res.data.access_token\n                // if(access_token !== \"expired\" && access_token.length === 40){\n                //     this.setState({auth:true, loading:false, access_token})\n                    // console.log('auth')\n                // } else {\n                //     alert(\"Contact Admin to authorize page\")\n                //     this.props.history.push('/admin')\n                // }\n        }).catch((err)=>{\n            alert(\"Contact Admin to authorize page\")\n            console.log(err)\n            this.props.history.push('/admin')\n        })\n\n        await axios.get(`https://api.video.ibm.com/channels/${e.selectedItem.id}/videos.json`, {headers: this.state.headers})\n        .then(res=>{\n            console.log(res)\n        })\n        this.setState({loading: false})\n    }\n\n    showPlaylists = ()=>{\n        const arr = this.state.playlists.map(item=>{\n            return(\n                <Tab label={item.text}>\n                    <BrowserView>\n                        <div className=\"some-content\">\n                            <iframe src={`https://video.ibm.com/combined-embed/playlist/${item.id}`} style={{border: \"0\", padding:\"0\",backgroundColor:\"white\"}} webkitallowfullscreen allowFullScreen frameBorder=\"no\" width=\"1040\" height=\"405\" referrerPolicy=\"no-referrer-when-downgrade\"></iframe>                     \n                        </div>\n                    </BrowserView>\n                    <MobileView>\n                        <div className=\"some-content\"\n                        style={{paddingTop:\"56.25%\", position:\"relative\", overflow:\"hidden\", display:\"block\", height:\"auto\", width: \"100%\"}}\n                        >\n                            <iframe src={`https://video.ibm.com/combined-embed/playlist/${item.id}`} style={{border: \"0\", padding:\"0\",backgroundColor:\"white\", position:\"relative\"}} webkitallowfullscreen allowFullScreen frameBorder=\"no\" width=\"100%\" height=\"auto\" referrerPolicy=\"no-referrer-when-downgrade\"></iframe>                     \n                        </div>\n                    </MobileView>\n                </Tab>\n            )\n        })\n        return arr\n    }\n\n    render(){\n\n        return (\n\n            <Container fluid={true} \n                style={{display:\"flex\", \n                    clear:\"both\", \n                    justifyContent: \"center\",\n                    minHeight:\"100vh\", \n                    overflow:\"scroll\", \n                    padding:\"1rem\",\n                    backgroundImage: `url(${back})`, \n                    // backgroundPositionX:\"350px\", \n                    backgroundSize: 'cover',\n                    alignItems: \"center\"}}>\n                <Row className=\"justify-content-md-center\">\n                {\n                    this.state.loading?\n                    <Loading\n                        style={{align: 'center'}}\n                        description=\"Active loading indicator\" withOverlay={false}\n                    />\n                    :\n                    <div className=\"bx--grid bx--grid--full-width landing-page\" >\n                        <div className=\"bx--row landing-page__banner\">\n                            <h1 style={{color:\"white\"}}>\n                                <strong>E-Learning Portal using Watson Media</strong>\n                            </h1>\n                        </div>\n                        <div className=\"bx--row landing-page__r2\">\n                            <div className=\"bx--col bx--no-gutter\">\n                                <div className=\"bx--grid bx--grid--no-gutter bx--grid--full-width\" style={{}}>\n                                    <div className=\"bx--row landing-page__tab-content\">\n                                        <div className=\"bx--col-md-4 bx--col-lg-7\">\n                                        <div style={{ maxWidth: 400 }}>\n                                            <Dropdown\n                                                id=\"default\"\n                                                titleText=\"Channel List\"\n                                                // helperText=\"This is some helper text\"\n                                                label= {this.state.selected}\n                                                items={this.state.channelList}\n                                                itemToString={(item) => (item ? item.text : '')}\n                                                onChange={this.onChange}\n                                            />\n                                        </div><br/>\n                                        \n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div className=\"bx--row landing-page__r3\">\n                            <div className=\"bx--col-md-4 bx--col-lg-8\">\n                                    {\n                                        this.state.selected === \"Select Channel\"?\n                                        <p></p>\n                                        :\n                                        <div>\n                                            <div className='tabs-story-wrapper' >\n                                                <Tabs backgroundColor=\"white\" style={{paddingLeft:\"2rem\"}}\n                                                type=\"container\">\n                                                    <Tab label=\"Videos\">\n                                                        <div>\n                                                        <iframe src={`https://video.ibm.com/combined-embed/${this.state.selectedItem.id}/?social=0&videos=tab` } style={{border: \"0\", padding:\"0\",backgroundColor:\"white\"}} webkitallowfullscreen allowFullScreen frameBorder=\"no\" width=\"1040\" height=\"405\" referrerPolicy=\"no-referrer-when-downgrade\"></iframe>\n                                                        </div>\n                                                    </Tab>\n                                                    {\n                                                        this.state.playlists.length===0\n                                                        ?\n                                                            <div></div>\n                                                        :\n                                                        <Tab label=\"Playlists\" style={{color:\"white\"}}>\n                                                            <Tabs backgroundColor=\"white\" style={{paddingLeft:\"1rem\"}}\n                                                                type=\"container\">\n                                                                {this.showPlaylists()}\n                                                            </Tabs> \n                                                        </Tab>\n                                                    }\n                                                    </Tabs>\n                                            </div>\n                                        </div>\n                                    }\n                            </div>\n                        </div>\n                    </div>\n                }\n                </Row>\n            </Container>\n          );\n    }\n}\n\nexport default withRouter(Dashboard)"]},"metadata":{},"sourceType":"module"}