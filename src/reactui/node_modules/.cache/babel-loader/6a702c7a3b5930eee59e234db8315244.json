{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/kushagra/IBM/Watson-Media/build-an-elearning-portal-with-watson-media/src/reactui/src/content/Dashboard/Dashboard.js\";\nimport React from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport { Dropdown, Loading, Tabs, Tab } from 'carbon-components-react';\nimport axios from 'axios';\nimport { Container, Row } from 'react-bootstrap';\nimport { BrowserView, MobileView } from \"react-device-detect\";\nimport back from './../../assets/background3.jpg';\n\nclass Dashboard extends React.Component {\n  constructor() {\n    super();\n\n    this.onChange = async e => {\n      console.log(e);\n      this.setState({\n        loading: true,\n        selected: e.selectedItem.text,\n        selectedItem: e.selectedItem\n      }); // await axios.get(`https://api.video.ibm.com/channels/${e.selectedItem.id}/playlists.json`,{headers: this.state.headers})\n      // axios.get(`http://localhost:8080/fetchVideos?id=${e.selectedItem.id}`)\n      // .then(res=>{\n      //     console.log(res.data)\n      //     console.log(`http://localhost:8080/fetchVideos?id=${e.selectedItem.id}`)\n      //     const arr = Object.values(res.data.playlists)\n      //         const items = arr.map(item=>{\n      //             return({\n      //                 id: item.id,\n      //                 text: item.title\n      //             })\n      //         })\n      //         console.log(\"playlists\", items)\n      //         this.setState({playlists: items})\n      // }).catch(err=>{\n      //     console.log(\"nopr\" ,err)\n      //     console.log(this.state.playlists)\n      // })\n\n      axios.get(`http://${window.location.hostname}:8080/showToken`).then(res => {\n        console.log(res.data);\n        const access_token = res.data.access_token;\n\n        if (access_token !== \"expired\" && access_token.length === 40) {\n          this.setState({\n            auth: true,\n            loading: false,\n            access_token\n          }); // console.log('auth')\n        } else {\n          alert(\"Contact Admin to authorize page\");\n          this.props.history.push('/admin');\n        }\n      }).catch(err => {\n        alert(\"Contact Admin to authorize page\");\n        console.log(err);\n        this.props.history.push('/admin');\n      });\n      const config = {\n        method: 'get',\n        url: `http://localhost:8080/fetchVideos?id=${e.selectedItem.id}`,\n        headers: {}\n      };\n      await axios(config).then(function (response) {\n        console.log(JSON.stringify(response.data));\n      }).catch(function (error) {\n        console.log(error);\n      }); // await axios.get(`https://api.video.ibm.com/channels/${e.selectedItem.id}/videos.json`, {headers: this.state.headers})\n      // .then(res=>{\n      //     console.log(res)\n      // })\n      // this.setState({loading: false})\n    };\n\n    this.showPlaylists = () => {\n      const arr = this.state.playlists.map(item => {\n        return /*#__PURE__*/_jsxDEV(Tab, {\n          label: item.text,\n          children: [/*#__PURE__*/_jsxDEV(BrowserView, {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"some-content\",\n              children: /*#__PURE__*/_jsxDEV(\"iframe\", {\n                src: `https://video.ibm.com/combined-embed/playlist/${item.id}`,\n                style: {\n                  border: \"0\",\n                  padding: \"0\",\n                  backgroundColor: \"white\"\n                },\n                webkitallowfullscreen: true,\n                allowFullScreen: true,\n                frameBorder: \"no\",\n                width: \"1040\",\n                height: \"405\",\n                referrerPolicy: \"no-referrer-when-downgrade\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 132,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(MobileView, {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"some-content\",\n              style: {\n                paddingTop: \"56.25%\",\n                position: \"relative\",\n                overflow: \"hidden\",\n                display: \"block\",\n                height: \"auto\",\n                width: \"100%\"\n              },\n              children: /*#__PURE__*/_jsxDEV(\"iframe\", {\n                src: `https://video.ibm.com/combined-embed/playlist/${item.id}`,\n                style: {\n                  border: \"0\",\n                  padding: \"0\",\n                  backgroundColor: \"white\",\n                  position: \"relative\"\n                },\n                webkitallowfullscreen: true,\n                allowFullScreen: true,\n                frameBorder: \"no\",\n                width: \"100%\",\n                height: \"auto\",\n                referrerPolicy: \"no-referrer-when-downgrade\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 139,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 17\n        }, this);\n      });\n      return arr;\n    };\n\n    this.state = {\n      selected: \"Select Channel\",\n      channelList: [],\n      loading: true,\n      code: \"\",\n      playlists: []\n    };\n  }\n\n  componentDidMount() {\n    // console.log(access_token)\n    // console.log(this.props.location.state.user)\n    if (!this.props.location.state) {\n      alert(\"Please Login to continue\");\n      this.props.history.push({\n        pathname: '/login',\n        state: {\n          reload: true\n        }\n      });\n    } else {\n      const access_token = this.props.location.state.access_token ? this.props.location.state.access_token : \"\";\n\n      if (Object.keys(access_token).length !== 0) {\n        // console.log(access_token)\n        this.setState({\n          code: access_token\n        });\n        const headers = {\n          'Authorization': 'Bearer ' + access_token,\n          'Content-Type': 'application/x-www-form-urlencoded',\n          \"Access-Control-Allow-Origin\": \"*\"\n        };\n        axios.get('https://api.video.ibm.com/users/self/channels.json', {\n          headers: headers\n        }).then(res => {\n          // console.log(res)\n          this.setState({\n            loading: false,\n            channelsData: res.data.channels,\n            headers\n          });\n          const arr = Object.values(res.data.channels); // console.log(arr)\n\n          const items = arr.map(item => {\n            return {\n              id: item.id,\n              text: item.title\n            };\n          });\n          this.setState({\n            channelList: items\n          }); // console.log(items)\n        });\n      } else {\n        console.log(\"nope\");\n      }\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      fluid: true,\n      style: {\n        display: \"flex\",\n        clear: \"both\",\n        justifyContent: \"center\",\n        minHeight: \"100vh\",\n        overflow: \"scroll\",\n        padding: \"1rem\",\n        backgroundImage: `url(${back})`,\n        // backgroundPositionX:\"350px\", \n        backgroundSize: 'cover',\n        alignItems: \"center\"\n      },\n      children: /*#__PURE__*/_jsxDEV(Row, {\n        className: \"justify-content-md-center\",\n        children: this.state.loading ? /*#__PURE__*/_jsxDEV(Loading, {\n          style: {\n            align: 'center'\n          },\n          description: \"Active loading indicator\",\n          withOverlay: false\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 21\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bx--grid bx--grid--full-width landing-page\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bx--row landing-page__banner\",\n            children: /*#__PURE__*/_jsxDEV(\"h1\", {\n              style: {\n                color: \"white\"\n              },\n              children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"E-Learning Portal using Watson Media\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 174,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 173,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bx--row landing-page__r2\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bx--col bx--no-gutter\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bx--grid bx--grid--no-gutter bx--grid--full-width\",\n                style: {},\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"bx--row landing-page__tab-content\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"bx--col-md-4 bx--col-lg-7\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        maxWidth: 400\n                      },\n                      children: /*#__PURE__*/_jsxDEV(Dropdown, {\n                        id: \"default\",\n                        titleText: \"Channel List\" // helperText=\"This is some helper text\"\n                        ,\n                        label: this.state.selected,\n                        items: this.state.channelList,\n                        itemToString: item => item ? item.text : '',\n                        onChange: this.onChange\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 183,\n                        columnNumber: 45\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 182,\n                      columnNumber: 41\n                    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 192,\n                      columnNumber: 47\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 181,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 180,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 179,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bx--row landing-page__r3\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bx--col-md-4 bx--col-lg-8\",\n              children: this.state.selected === \"Select Channel\" ? /*#__PURE__*/_jsxDEV(\"p\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 203,\n                columnNumber: 41\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"tabs-story-wrapper\",\n                  children: /*#__PURE__*/_jsxDEV(Tabs, {\n                    backgroundColor: \"white\",\n                    style: {\n                      paddingLeft: \"2rem\"\n                    },\n                    type: \"container\",\n                    children: [/*#__PURE__*/_jsxDEV(Tab, {\n                      label: \"Videos\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        children: /*#__PURE__*/_jsxDEV(\"iframe\", {\n                          src: `https://video.ibm.com/combined-embed/${this.state.selectedItem.id}/?social=0&videos=tab`,\n                          style: {\n                            border: \"0\",\n                            padding: \"0\",\n                            backgroundColor: \"white\"\n                          },\n                          webkitallowfullscreen: true,\n                          allowFullScreen: true,\n                          frameBorder: \"no\",\n                          width: \"1040\",\n                          height: \"405\",\n                          referrerPolicy: \"no-referrer-when-downgrade\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 211,\n                          columnNumber: 57\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 210,\n                        columnNumber: 57\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 209,\n                      columnNumber: 53\n                    }, this), this.state.playlists.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 217,\n                      columnNumber: 61\n                    }, this) : /*#__PURE__*/_jsxDEV(Tab, {\n                      label: \"Playlists\",\n                      style: {\n                        color: \"white\"\n                      },\n                      children: /*#__PURE__*/_jsxDEV(Tabs, {\n                        backgroundColor: \"white\",\n                        style: {\n                          paddingLeft: \"1rem\"\n                        },\n                        type: \"container\",\n                        children: this.showPlaylists()\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 220,\n                        columnNumber: 61\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 219,\n                      columnNumber: 57\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 207,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 206,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 205,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default _c = withRouter(Dashboard);\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"sources":["/Users/kushagra/IBM/Watson-Media/build-an-elearning-portal-with-watson-media/src/reactui/src/content/Dashboard/Dashboard.js"],"names":["React","withRouter","Dropdown","Loading","Tabs","Tab","axios","Container","Row","BrowserView","MobileView","back","Dashboard","Component","constructor","onChange","e","console","log","setState","loading","selected","selectedItem","text","get","window","location","hostname","then","res","data","access_token","length","auth","alert","props","history","push","catch","err","config","method","url","id","headers","response","JSON","stringify","error","showPlaylists","arr","state","playlists","map","item","border","padding","backgroundColor","paddingTop","position","overflow","display","height","width","channelList","code","componentDidMount","pathname","reload","Object","keys","channelsData","channels","values","items","title","render","clear","justifyContent","minHeight","backgroundImage","backgroundSize","alignItems","align","color","maxWidth","paddingLeft"],"mappings":"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","sourcesContent":["import React from \"react\"\nimport {\n    withRouter\n  } from \"react-router-dom\"\nimport {Dropdown, Loading, Tabs, Tab} from 'carbon-components-react'\nimport axios from 'axios'\nimport {Container, Row} from 'react-bootstrap'\nimport {\n    BrowserView,\n    MobileView,\n} from \"react-device-detect\";\nimport back from './../../assets/background3.jpg'\n\n\n  class Dashboard extends React.Component{\n    constructor(){\n        super()\n        this.state = {\n            selected: \"Select Channel\",\n            channelList: [],\n            loading: true,\n            code:\"\",\n            playlists:[]\n        }\n    }\n\n    componentDidMount(){\n        // console.log(access_token)\n        // console.log(this.props.location.state.user)\n        if(!this.props.location.state){\n            alert(\"Please Login to continue\")\n            this.props.history.push({\n                pathname:'/login',\n                state:{ reload:true }\n            })\n        } else {\n            const access_token = this.props.location.state.access_token?this.props.location.state.access_token:\"\"\n            if(Object.keys(access_token).length !== 0){\n                // console.log(access_token)\n                this.setState({code: access_token})\n                const headers = {\n                    'Authorization': 'Bearer ' + access_token,\n                    'Content-Type': 'application/x-www-form-urlencoded',\n                    \"Access-Control-Allow-Origin\": \"*\"\n                }\n                axios.get('https://api.video.ibm.com/users/self/channels.json',{headers:headers}).then(res=>{\n                    // console.log(res)\n                    this.setState({loading:false, channelsData: res.data.channels, headers})\n                    const arr = Object.values(res.data.channels)\n                    // console.log(arr)\n                    const items = arr.map(item=>{\n                        return({\n                            id: item.id,\n                            text: item.title\n                        })\n                    })\n                    this.setState({channelList: items})\n                    // console.log(items)\n                })\n            } else {\n                console.log(\"nope\")\n            }\n        }\n    }\n\n    onChange = async (e)=>{\n        console.log(e)\n        this.setState({loading: true, selected: e.selectedItem.text, selectedItem: e.selectedItem})\n        // await axios.get(`https://api.video.ibm.com/channels/${e.selectedItem.id}/playlists.json`,{headers: this.state.headers})\n        // axios.get(`http://localhost:8080/fetchVideos?id=${e.selectedItem.id}`)\n        // .then(res=>{\n        //     console.log(res.data)\n        //     console.log(`http://localhost:8080/fetchVideos?id=${e.selectedItem.id}`)\n        //     const arr = Object.values(res.data.playlists)\n        //         const items = arr.map(item=>{\n        //             return({\n        //                 id: item.id,\n        //                 text: item.title\n        //             })\n        //         })\n        //         console.log(\"playlists\", items)\n        //         this.setState({playlists: items})\n        // }).catch(err=>{\n        //     console.log(\"nopr\" ,err)\n        //     console.log(this.state.playlists)\n        // })\n\n        axios.get(`http://${window.location.hostname}:8080/showToken`).then(res=>{\n            console.log(res.data)\n            const access_token = res.data.access_token\n            if(access_token !== \"expired\" && access_token.length === 40){\n                this.setState({auth:true, loading:false, access_token})\n                // console.log('auth')\n            } else {\n                alert(\"Contact Admin to authorize page\")\n                this.props.history.push('/admin')\n            }\n        }).catch((err)=>{\n            alert(\"Contact Admin to authorize page\")\n            console.log(err)\n            this.props.history.push('/admin')\n        })\n\n        const config = {\n            method: 'get',\n            url: `http://localhost:8080/fetchVideos?id=${e.selectedItem.id}`,\n            headers: { }\n          };\n          \n        await axios(config)\n          .then(function (response) {\n            console.log(JSON.stringify(response.data));\n          })\n          .catch(function (error) {\n            console.log(error);\n          });\n          \n\n        // await axios.get(`https://api.video.ibm.com/channels/${e.selectedItem.id}/videos.json`, {headers: this.state.headers})\n        // .then(res=>{\n        //     console.log(res)\n        // })\n        // this.setState({loading: false})\n    }\n\n    showPlaylists = ()=>{\n        const arr = this.state.playlists.map(item=>{\n            return(\n                <Tab label={item.text}>\n                    <BrowserView>\n                        <div className=\"some-content\">\n                            <iframe src={`https://video.ibm.com/combined-embed/playlist/${item.id}`} style={{border: \"0\", padding:\"0\",backgroundColor:\"white\"}} webkitallowfullscreen allowFullScreen frameBorder=\"no\" width=\"1040\" height=\"405\" referrerPolicy=\"no-referrer-when-downgrade\"></iframe>                     \n                        </div>\n                    </BrowserView>\n                    <MobileView>\n                        <div className=\"some-content\"\n                        style={{paddingTop:\"56.25%\", position:\"relative\", overflow:\"hidden\", display:\"block\", height:\"auto\", width: \"100%\"}}\n                        >\n                            <iframe src={`https://video.ibm.com/combined-embed/playlist/${item.id}`} style={{border: \"0\", padding:\"0\",backgroundColor:\"white\", position:\"relative\"}} webkitallowfullscreen allowFullScreen frameBorder=\"no\" width=\"100%\" height=\"auto\" referrerPolicy=\"no-referrer-when-downgrade\"></iframe>                     \n                        </div>\n                    </MobileView>\n                </Tab>\n            )\n        })\n        return arr\n    }\n\n    render(){\n\n        return (\n\n            <Container fluid={true} \n                style={{display:\"flex\", \n                    clear:\"both\", \n                    justifyContent: \"center\",\n                    minHeight:\"100vh\", \n                    overflow:\"scroll\", \n                    padding:\"1rem\",\n                    backgroundImage: `url(${back})`, \n                    // backgroundPositionX:\"350px\", \n                    backgroundSize: 'cover',\n                    alignItems: \"center\"}}>\n                <Row className=\"justify-content-md-center\">\n                {\n                    this.state.loading?\n                    <Loading\n                        style={{align: 'center'}}\n                        description=\"Active loading indicator\" withOverlay={false}\n                    />\n                    :\n                    <div className=\"bx--grid bx--grid--full-width landing-page\" >\n                        <div className=\"bx--row landing-page__banner\">\n                            <h1 style={{color:\"white\"}}>\n                                <strong>E-Learning Portal using Watson Media</strong>\n                            </h1>\n                        </div>\n                        <div className=\"bx--row landing-page__r2\">\n                            <div className=\"bx--col bx--no-gutter\">\n                                <div className=\"bx--grid bx--grid--no-gutter bx--grid--full-width\" style={{}}>\n                                    <div className=\"bx--row landing-page__tab-content\">\n                                        <div className=\"bx--col-md-4 bx--col-lg-7\">\n                                        <div style={{ maxWidth: 400 }}>\n                                            <Dropdown\n                                                id=\"default\"\n                                                titleText=\"Channel List\"\n                                                // helperText=\"This is some helper text\"\n                                                label= {this.state.selected}\n                                                items={this.state.channelList}\n                                                itemToString={(item) => (item ? item.text : '')}\n                                                onChange={this.onChange}\n                                            />\n                                        </div><br/>\n                                        \n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div className=\"bx--row landing-page__r3\">\n                            <div className=\"bx--col-md-4 bx--col-lg-8\">\n                                    {\n                                        this.state.selected === \"Select Channel\"?\n                                        <p></p>\n                                        :\n                                        <div>\n                                            <div className='tabs-story-wrapper' >\n                                                <Tabs backgroundColor=\"white\" style={{paddingLeft:\"2rem\"}}\n                                                type=\"container\">\n                                                    <Tab label=\"Videos\">\n                                                        <div>\n                                                        <iframe src={`https://video.ibm.com/combined-embed/${this.state.selectedItem.id}/?social=0&videos=tab` } style={{border: \"0\", padding:\"0\",backgroundColor:\"white\"}} webkitallowfullscreen allowFullScreen frameBorder=\"no\" width=\"1040\" height=\"405\" referrerPolicy=\"no-referrer-when-downgrade\"></iframe>\n                                                        </div>\n                                                    </Tab>\n                                                    {\n                                                        this.state.playlists.length===0\n                                                        ?\n                                                            <div></div>\n                                                        :\n                                                        <Tab label=\"Playlists\" style={{color:\"white\"}}>\n                                                            <Tabs backgroundColor=\"white\" style={{paddingLeft:\"1rem\"}}\n                                                                type=\"container\">\n                                                                {this.showPlaylists()}\n                                                            </Tabs> \n                                                        </Tab>\n                                                    }\n                                                    </Tabs>\n                                            </div>\n                                        </div>\n                                    }\n                            </div>\n                        </div>\n                    </div>\n                }\n                </Row>\n            </Container>\n          );\n    }\n}\n\nexport default withRouter(Dashboard)"]},"metadata":{},"sourceType":"module"}